<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Picture Word Worksheet Generator</title>
  <script src="cvcLadderData.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <style>
body {
  font-family: 'Poppins', sans-serif;
  margin: 40px;
  text-align: center;
}

h1 {
  font-size: 26px;
  margin-bottom: 10px;
}

.subtitle {
  font-size: 16px;
  margin-bottom: 20px;
}

.table-section {
  border: 2px solid #000;
  padding: 5px;
  margin: 12px auto;
  width: fit-content;
  box-sizing: border-box;
}

.section-label {
  font-weight: 600;
  font-size: 18px;
  margin-bottom: 8px;
}

.skill-button-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
  justify-content: center;
}

.skill-button-grid .row {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 6px;
}

.skill-button {
  border: 2px solid #000;
  padding: 10px 16px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
}

.skill-button.selected {
  background-color: #007bff;
  color: white;
  box-shadow: 0 0 4px rgba(0, 123, 255, 0.5);
}

#printableSection {
  margin-top: 20px;
}

#worksheetTitle {
  font-size: 16px;
  font-weight: bold;
  margin-bottom: 2px;
  text-align: center;
}

#worksheetDirections {
  font-size: 12px;
  margin-bottom: 4px;
  text-align: center;
}

table {
  margin: auto;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #000;
  padding: 0;
  text-align: center;
  vertical-align: middle;
  font-size: 13px;
}

td.picture-td {
  overflow: hidden;
  position: relative;
}

.picture-cell {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  overflow: hidden; /* Force anything extra to hide */
}

.picture-cell img {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain; /* Scales to fit inside cell */
  display: block;
}

.write-cell {
  vertical-align: bottom;
  padding: 0;
}

.line-wrapper {
  display: flex;
  justify-content: center;
  gap: 3px;
  margin-top: auto;
  margin-bottom: 3px;
}

.letter-line {
  display: inline-block;
  border-bottom: 2px solid black;
  margin: 0 1px;
}

#worksheetCopyright {
  font-size: 10px;
  text-align: right;
  margin-top: 6px;
  padding-right: 20px;
  visibility: hidden;
}

#answerKey {
  page-break-before: always;
  margin-top: 20px;
}

@media print {
  body * {
    visibility: hidden;
  }

  #printableSection, #printableSection * {
    visibility: visible;
  }

  #printableSection {
    position: absolute;
    top: 0;
    left: 0;
    width: 95%;
    margin: auto;
    transform-origin: top center;
  }

  #worksheetCopyright {
    visibility: visible;
  }
}
  </style>
</head>
<body>
  <h1>Picture Word Worksheet Generator</h1>
  <div class="subtitle">
    Select a phonics skill, then generate a worksheet with matching pictures and writing lines.
  </div>

  <div class="table-section">
    <div class="section-label">Select Skills</div>
    <div class="skill-button-grid">
      <div class="row">
        <div class="skill-button" data-skill="0.1">Short A</div>
        <div class="skill-button" data-skill="0.2">Short O</div>
        <div class="skill-button" data-skill="0.3">Short I</div>
        <div class="skill-button" data-skill="0.4">Short U</div>
        <div class="skill-button" data-skill="0.5">Short E</div>
      </div>
      <div class="row">
        <div class="skill-button" data-skill="0.6">FLSZ</div>
        <div class="skill-button" data-skill="0.7">CVC & FLSZ</div>
        <div class="skill-button" data-skill="mixed">Mixed CVC</div>
      </div>
    </div>
  </div>

  <div class="table-section">
    <div class="section-label">Generate Worksheet</div>
    <button onclick="generatePictureWordTable()" style="font-size: 18px; padding: 10px 24px;">Generate</button>
    <button onclick="window.print()" style="font-size: 18px; padding: 10px 24px;">Print</button>
    <div style="margin-top: 8px;">
      <label style="font-size: 14px;">
        <input type="checkbox" id="includeWordBank">
        Include Word Bank
      </label>
    </div>
  </div>

  <div id="printableSection">
    <div id="worksheetTitle"></div>
    <div id="worksheetDirections"></div>
  </div>

  <script>
    const selectedSkills = new Set();
    const skillLabels = {
      "0.1": "Short A",
      "0.2": "Short O",
      "0.3": "Short I",
      "0.4": "Short U",
      "0.5": "Short E",
      "0.6": "FLSZ",
      "0.7": "CVC & FLSZ",
      "mixed": "Mixed CVC"
    };

    document.querySelectorAll('.skill-button').forEach(button => {
      button.addEventListener('click', () => {
        const skill = button.dataset.skill;
        if (selectedSkills.has(skill)) {
          selectedSkills.delete(skill);
          button.classList.remove('selected');
        } else {
          selectedSkills.add(skill);
          button.classList.add('selected');
        }
      });
    });

function generatePictureWordTable() {
  const container = document.getElementById('printableSection');
  container.innerHTML = '';

  // Title + directions
  const skillNames = [...selectedSkills].map(skill => skillLabels[skill] || skill);
  const skillTitle = `${skillNames.join(', ')} Spelling`;
  const skillDirections = `Directions: Spell the word that matches the picture.`;

  const title = document.createElement('div');
  title.id = "worksheetTitle";
  title.textContent = skillTitle;

  const directions = document.createElement('div');
  directions.id = "worksheetDirections";
  directions.textContent = skillDirections;

  container.appendChild(title);
  container.appendChild(directions);

  // Generate 8 shuffled words
  const words = [...cvcLadderWords];
  const shuffled = words.sort(() => 0.5 - Math.random()).slice(0, 8);

  const includeBank = document.getElementById('includeWordBank').checked;
  const tableWidth = includeBank ? 500 : 540;
  const maxImgWidth = includeBank ? 140 : 160;
  const maxImgHeight = includeBank ? 85 : 105;
  const writeCellHeight = includeBank ? 85 : 100;
  const letterLineWidth = includeBank ? 30 : 34;

  // Word Bank
  if (includeBank) {
    const wordBankContainer = document.createElement('div');
    wordBankContainer.style.border = '1px solid #000';
    wordBankContainer.style.borderRadius = '12px';
    wordBankContainer.style.padding = '4px 12px';
    wordBankContainer.style.margin = '6px auto';
    wordBankContainer.style.width = tableWidth + 'px';
    wordBankContainer.style.textAlign = 'center';

    const wordBankHeader = document.createElement('div');
    wordBankHeader.style.fontWeight = 'bold';
    wordBankHeader.style.fontSize = '13px';
    wordBankHeader.textContent = 'Word Bank:';
    wordBankContainer.appendChild(wordBankHeader);

    const wordBankList = document.createElement('div');
    wordBankList.style.fontSize = '12px';
    wordBankList.style.display = 'flex';
    wordBankList.style.flexWrap = 'wrap';
    wordBankList.style.justifyContent = 'center';
    wordBankList.style.gap = '20px';
    wordBankList.style.marginTop = '2px';

    const shuffledBank = [...shuffled].sort(() => 0.5 - Math.random());
    shuffledBank.forEach(word => {
      const span = document.createElement('span');
      span.textContent = word;
      span.style.fontWeight = '600';
      wordBankList.appendChild(span);
    });

    wordBankContainer.appendChild(wordBankList);
    container.appendChild(wordBankContainer);
  }

  // Main Table
  const table = document.createElement('table');
  table.style.width = tableWidth + 'px';

  const headerRow = document.createElement('tr');
  ['No.', 'Picture', 'Write the Word'].forEach(text => {
    const th = document.createElement('th');
    th.textContent = text;
    headerRow.appendChild(th);
  });
  table.appendChild(headerRow);

  shuffled.forEach((word, index) => {
    const row = document.createElement('tr');

    const tdNum = document.createElement('td');
    tdNum.textContent = index + 1;

    const tdPic = document.createElement('td');
    tdPic.className = 'picture-td';
    tdPic.style.width = maxImgWidth + 'px';
    tdPic.style.height = maxImgHeight + 'px';

    const picWrapper = document.createElement('div');
    picWrapper.className = 'picture-cell';
    picWrapper.style.width = maxImgWidth + 'px';
    picWrapper.style.height = maxImgHeight + 'px';

    const img = document.createElement('img');
    img.src = cvcLadderImages[word] || '';
    img.alt = word;
    img.style.maxWidth = maxImgWidth + 'px';
    img.style.maxHeight = maxImgHeight + 'px';
    img.style.objectFit = 'contain';

    picWrapper.appendChild(img);
    tdPic.appendChild(picWrapper);

    const tdLines = document.createElement('td');
    tdLines.className = 'write-cell';
    tdLines.style.height = writeCellHeight + 'px';

    const linesWrapper = document.createElement('div');
    linesWrapper.className = 'line-wrapper';
    for (let i = 0; i < word.length; i++) {
      const span = document.createElement('span');
      span.className = 'letter-line';
      span.style.width = letterLineWidth + 'px';
      linesWrapper.appendChild(span);
    }
    tdLines.appendChild(linesWrapper);

    row.appendChild(tdNum);
    row.appendChild(tdPic);
    row.appendChild(tdLines);

    table.appendChild(row);
  });

  container.appendChild(table);

  // Copyright
  const copyrightStudent = document.createElement('div');
  copyrightStudent.id = 'worksheetCopyright';
  copyrightStudent.textContent = '© 2025 Intervention Station – TeachWithMrC';
  container.appendChild(copyrightStudent);

  // Answer Key
  const answerKey = document.createElement('div');
  answerKey.id = 'answerKey';

  const answerTitle = document.createElement('div');
  answerTitle.style.fontWeight = 'bold';
  answerTitle.style.marginBottom = '8px';
  answerTitle.style.fontSize = '16px';
  answerTitle.textContent = `${skillNames.join(', ')} Spelling – Answer Key`;
  answerKey.appendChild(answerTitle);

  const answerTable = document.createElement('table');
  answerTable.style.width = tableWidth + 'px';

  const answerHeader = document.createElement('tr');
  ['No.', 'Picture', 'Answer'].forEach(text => {
    const th = document.createElement('th');
    th.textContent = text;
    answerHeader.appendChild(th);
  });
  answerTable.appendChild(answerHeader);

  shuffled.forEach((word, index) => {
    const row = document.createElement('tr');

    const tdNum = document.createElement('td');
    tdNum.textContent = index + 1;

    const tdPic = document.createElement('td');
    tdPic.className = 'picture-td';
    tdPic.style.height = maxImgHeight + 'px';
    tdPic.style.width = maxImgWidth + 'px';

    const picWrapper = document.createElement('div');
    picWrapper.className = 'picture-cell';
    picWrapper.style.width = maxImgWidth + 'px';
    picWrapper.style.height = maxImgHeight + 'px';

    const img = document.createElement('img');
    img.src = cvcLadderImages[word] || '';
    img.alt = word;
    img.style.maxWidth = maxImgWidth + 'px';
    img.style.maxHeight = maxImgHeight + 'px';
    img.style.objectFit = 'contain';

    picWrapper.appendChild(img);
    tdPic.appendChild(picWrapper);

    const tdAnswer = document.createElement('td');
    tdAnswer.textContent = word;
    tdAnswer.style.fontWeight = '600';

    row.appendChild(tdNum);
    row.appendChild(tdPic);
    row.appendChild(tdAnswer);

    answerTable.appendChild(row);
  });

  answerKey.appendChild(answerTable);
  container.appendChild(answerKey);

  // Copyright at the end
  const copyright = document.createElement('div');
  copyright.id = 'worksheetCopyright';
  copyright.textContent = '© 2025 Intervention Station – TeachWithMrC';
  container.appendChild(copyright);
}
  </script>
</body>
</html>
