<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tic Tac Toe Phonics Generator</title>

  <!-- Load your data (make sure the filename is correct) -->
  <script src="fluencyDataFull_v8-2_clean.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --cvc:#e9f2ff;          --cvc-selected:#1976d2;
      --dig:#f3e9ff;          --dig-selected:#8e24aa;
      --glued:#e8fff4;        --glued-selected:#2e7d32;
      --vce:#fff5e6;          --vce-selected:#ef6c00;
      --rctrl:#f0f5ff;        --rctrl-selected:#3f51b5;
      --vteams:#fff0f6;       --vteams-selected:#d81b60;
      --dip:#eefcfb;          --dip-selected:#00897b;
      --variant:#fff8e1;      --variant-selected:#f9a825;
      --soft:#eef4ff;         --soft-selected:#455a64;

      --chip-bg:#f3f6fb; --chip-text:#263238; --chip-x:#546e7a;
    }

    body { font-family:'Poppins',sans-serif; margin:40px; text-align:center; background:#fafafa; }
    h1 { font-size: 26px; margin-bottom: 10px; }
    .subtitle { color:#555; font-size: 16px; margin:0 0 30px; }

    .layout { width:100%; max-width:1100px; margin:0 auto 14px auto; display:grid; grid-template-columns: minmax(260px,1fr) max-content; grid-template-rows: 1fr 1fr; gap:12px; align-items:start; }
    .layout .left { grid-column:1; grid-row:1 / span 2; }
    .layout .right-top { grid-column:2; grid-row:1; }
    .layout .right-bottom { grid-column:2; grid-row:2; }

    .table-section { border:2px solid #000; padding:20px; margin:12px auto; width:fit-content; box-sizing:border-box; border-radius:12px; background:#fff; }
    .section-label { font-weight:600; font-size:18px; margin-bottom:12px; text-align:center; }

    .skill-block { border:1px solid #bbb; border-radius:12px; overflow:hidden; margin-bottom:12px; background:#fff; }
    .skill-header {
      display:flex; align-items:center; justify-content:center;
      padding:10px 14px; font-weight:700; font-size:18px; cursor:pointer; user-select:none;
    }
    .skill-header .arrow { font-size:22px; line-height:1; margin:0 10px; width:22px; text-align:center; }
    .skill-header .title { white-space:nowrap; }
    .skills-inner { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; padding:12px; }
    .skills-inner.collapsed { display:none; }

    .bg-cvc   .skill-header { background:var(--cvc); }
    .bg-dig   .skill-header { background:var(--dig); }
    .bg-glued .skill-header { background:var(--glued); }
    .bg-vce   .skill-header { background:var(--vce); }
    .bg-rctrl .skill-header { background:var(--rctrl); }
    .bg-vteams .skill-header{ background:var(--vteams); }
    .bg-dip   .skill-header { background:var(--dip); }
    .bg-variant .skill-header{ background:var(--variant); }
    .bg-soft  .skill-header { background:var(--soft); }

    .skill-button{
      border:2px solid #000; padding:10px 16px; border-radius:8px;
      font-weight:600; font-size:14px; cursor:pointer; background:#fff;
      transition:background-color 0.3s, color 0.3s, box-shadow 0.3s;
    }
    .skill-button.selected{ background-color:#007bff; color:white; box-shadow:0 0 4px rgba(0,123,255,0.5); }
    .skill-button:active{ transform:translateY(1px); }
    .skill-button.cvc.selected{ background:var(--cvc-selected); color:#fff; }
    .skill-button.dig.selected{ background:var(--dig-selected); color:#fff; }
    .skill-button.glued.selected{ background:var(--glued-selected); color:#fff; }
    .skill-button.vce.selected{ background:var(--vce-selected); color:#fff; }
    .skill-button.rctrl.selected{ background:var(--rctrl-selected); color:#fff; }
    .skill-button.vteams.selected{ background:var(--vteams-selected); color:#fff; }
    .skill-button.dip.selected{ background:var(--dip-selected); color:#fff; }
    .skill-button.variant.selected{ background:var(--variant-selected); color:#fff; }
    .skill-button.soft.selected{ background:var(--soft-selected); color:#fff; }

    .chips-title { margin-top:12px; text-align:center; font-weight:700; font-size:14px; }
    .chips-wrap { margin-top:8px; display:flex; justify-content:center; flex-wrap:wrap; gap:8px; }
    .chip {
      background:var(--chip-bg); color:var(--chip-text);
      border:none; border-radius:999px; padding:6px 10px; font-size:14px;
      display:flex; align-items:center; gap:8px;
    }
    .chip .x {
      width:16px; height:16px; border-radius:50%; display:flex; align-items:center; justify-content:center;
      font-weight:700; font-size:11px; cursor:pointer; background:#e8edf2; color:var(--chip-x);
    }

    .option-grid { display:flex; justify-content:center; flex-wrap:wrap; gap:12px; margin-top:10px; }
    .option-box { padding:10px 14px; border:2px solid #000; border-radius:8px; cursor:pointer; transition:background-color 0.3s, color 0.3s; }
    .option-box.selected-step2 { background-color:#d9c9ff; }
    .option-box.selected-step3 { background-color:#d0f0ff; }
    .option-box input { display:none; }

    .actions-sticky { position:sticky; top:8px; z-index:50; background:#fff; }

    #output { margin-top:20px; }
    #printableSection { margin-top:20px; }
    .page { width:8.5in; max-width:calc(100% - 32px); background:#fff; padding:0.5in; border:2px solid #000; border-radius:8px; margin:0 auto; box-sizing:border-box; page-break-inside:avoid; }
    .worksheet-title { font-size:22px; margin-bottom:8px; font-weight:700; text-align:center; }
    .worksheet-directions { font-size:14px; margin:12px auto 24px auto; text-align:center; max-width:600px; }
    .board-wrap { display:grid; grid-template-columns:1fr 1fr; gap:30px; justify-content:center; max-width:900px; margin:0 auto; page-break-inside:avoid; }
    .board-shell { display:flex; flex-direction:column; align-items:center; width:100%; border:3px solid #000; border-radius:16px; padding:12px; background:#fff; box-sizing:border-box; }
    .board-label { font-weight:700; font-size:22px; margin-bottom:10px; }

    table { margin:auto; border-collapse:collapse; }
    .tic-tac-toe td {
      border:1px solid #000;
      width:100px;
      height:80px;
      padding:6px;
      font-size:32px;
      text-align:center;
      vertical-align:middle;
    }
    .tic-tac-toe td .cell {
      display:flex;
      align-items:center;
      justify-content:center;
      height:100%;
      width:100%;
      box-sizing:border-box;
    }
    .tic-tac-toe td .cell.word {
      font-size:24px; /* Adjusted to match perfect version */
      white-space:nowrap;
      justify-content:center;
    }
    .tic-tac-toe td .cell.sentence {
      font-size:20px; /* Adjusted to match perfect version */
      white-space:normal;
      justify-content:center;
      flex-wrap:wrap;
      text-align:center;
      line-height:22px; /* Added for better sentence spacing */
    }
    .tic-tac-toe td.has-bottom { border-bottom:6px solid #000; }
    .tic-tac-toe td.has-right  { border-right:6px solid #000; }

    #copyright { font-size:12px; text-align:right; margin-top:12px; display:none; }

    @media print {
      body * { visibility:hidden; }
      #printableSection, #printableSection * { visibility:visible; }
      #printableSection { position:absolute; top:0; left:0; width:100%; }
      #copyright { display:block; }
      .page { width:auto; padding:0; box-shadow:none; border:none; page-break-inside:avoid; }
      .board-wrap { gap:16px; page-break-inside:avoid; }
    }
  </style>
</head>
<body>
  <h1>Fluency Grid Generator</h1>
  <div class="subtitle">Step 1: skills → Step 2: blends → Step 3: words/sentences/both → Step 4: generate four Tic-Tac-Toe boards.</div>

  <div class="layout">
    <div class="left">
      <!-- STEP 1: SELECT SKILLS -->
      <div id="step1" class="table-section">
        <div class="section-label">Step 1: Select Skills</div>

        <!-- CVC Short Vowels -->
        <div class="skill-block bg-cvc">
          <div class="skill-header" data-target="cvc"><span class="arrow">▲</span><span class="title">CVC Short Vowels</span><span class="arrow">▲</span></div>
          <div class="skills-inner" id="section-cvc">
            <div class="row
