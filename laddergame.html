<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CVC Word Ladder Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <style>
    * {
      font-family: 'Poppins', sans-serif;
    }

    body {
      text-align: center;
      margin: 30px;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 20px;
    }

    .ladder-table {
      border-collapse: collapse;
      margin: 0 auto;
    }

    .ladder-table td {
      padding: 10px;
      vertical-align: middle;
      text-align: center;
      width: 160px;
      height: 70px;
    }

    .ladder-cell {
      border: 2px solid black;
      font-size: 32px;
      font-weight: bold;
    }

    .hint {
      font-size: 20px;
      font-weight: bold;
      background: #f0f0f0;
      border: 2px solid black;
      border-radius: 8px;
      padding: 6px 10px;
      display: inline-block;
    }

    button {
      font-size: 16px;
      margin: 20px 10px;
      padding: 10px 20px;
    }

    @media print {
      button {
        display: none;
      }
    }
  </style>
</head>
<body>
  <h1>CVC Word Ladder</h1>
  <button onclick="generateLadder()">Generate New Ladder</button>
  <button onclick="window.print()">Print</button>

  <div id="ladderContainer"></div>

  <script>
    const cvcWords = [
      "bag","bat","bed","beg","bib","bin","bot","box","bug","bun","bus",
      "cab","can","cap","cat","cod","cop","cot","cub","cup","cut","dad",
      "dam","den","dig","doc","dog","dot","dug","fan","fin","gap","gum",
      "ham","hat","hen","hid","hip","hit","hog","hop","hot","hug","hut",
      "jag","jet","jig","job","jog","jug","kid","kit","lab","leg","lid",
      "lip","lit","lob","log","mad","man","map","mat","mom","mop","mud",
      "mug","nap","net","nut","pad","pan","pen","pet","pig","pin","pit",
      "pop","pot","pug","pup","rag","ram","rat","rib","rig","rim","rip",
      "rob","rod","rug","run","sad","sap","sip","sit","sob","sub","sun",
      "tag","tap","ten","tin","top","tub","tug","tux","van","vet","wag",
      "wax","web","wed","wig","win","zap","zip"
    ];

    function isOneLetterDiff(w1, w2) {
      let diff = 0;
      for (let i = 0; i < w1.length; i++) {
        if (w1[i] !== w2[i]) diff++;
      }
      return diff === 1;
    }

    function buildGraph(words) {
      const graph = {};
      for (let word of words) graph[word] = [];
      for (let i = 0; i < words.length; i++) {
        for (let j = i + 1; j < words.length; j++) {
          if (isOneLetterDiff(words[i], words[j])) {
            graph[words[i]].push(words[j]);
            graph[words[j]].push(words[i]);
          }
        }
      }
      return graph;
    }

    function findLadder(graph, length = 5) {
      const words = Object.keys(graph);
      const visited = new Set();

      for (let start of shuffle(words)) {
        let queue = [[start]];
        while (queue.length) {
          const path = queue.shift();
          const current = path[path.length - 1];

          if (path.length === length) return path;

          for (let neighbor of graph[current]) {
            if (!path.includes(neighbor)) {
              queue.push([...path, neighbor]);
            }
          }
        }
      }
      return null;
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function generateHint(from, to) {
      for (let i = 0; i < from.length; i++) {
        if (from[i] !== to[i]) return `${from[i]} â†’ ${to[i]}`;
      }
      return "";
    }

    function generateLadder() {
      const graph = buildGraph(cvcWords);
      const ladder = findLadder(graph, 5);
      const container = document.getElementById("ladderContainer");
      if (!ladder) {
        container.innerHTML = "<p>Could not generate a valid ladder. Try again!</p>";
        return;
      }

      let html = "<table class='ladder-table'>";
      // Display bottom-up
      for (let i = ladder.length - 1; i >= 0; i--) {
        html += `<tr><td class="ladder-cell">${ladder[i].toUpperCase().split("").join(" ")}</td></tr>`;
        if (i > 0) {
          const hint = generateHint(ladder[i], ladder[i - 1]);
          html += `<tr><td class="hint">${hint}</td></tr>`;
        }
      }
      html += "</table>";
      container.innerHTML = html;
    }

    // Auto-generate on first load
    window.onload = generateLadder;
  </script>
</body>
</html>
