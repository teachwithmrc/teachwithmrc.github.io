<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Roll and Read Generator</title>

  <!-- Data file --> 
  <script src="fluencyDataFull_v8-2_clean.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

 <style>
  :root {
    --cvc: #e9f2ff;          --cvc-selected: #1976d2;
    --dig: #f3e9ff;          --dig-selected: #8e24aa;
    --glued: #e8fff4;        --glued-selected: #2e7d32;
    --vce: #fff5e6;          --vce-selected: #ef6c00;
    --rctrl: #f0f5ff;        --rctrl-selected: #3f51b5;
    --vteams: #fff0f6;       --vteams-selected: #d81b60;
    --dip: #eefcfb;          --dip-selected: #00897b;
    --variant: #fff8e1;      --variant-selected: #f9a825;
    --soft: #eef4ff;         --soft-selected: #455a64;
    --chip-bg: #f3f6fb;      --chip-text: #263238; 
    --chip-x: #546e7a;
  }

  body { font-family: 'Poppins', sans-serif; margin: 28px; text-align: center; background: #fafafa; }
  h1 { font-size: 32px; margin-bottom: 6px; }
  .subtitle { color: #555; margin: 0 0 14px; }

  .layout { 
    width: 100%;
    max-width: 1100px;
    margin: 0 auto 14px auto;
    display: grid;
    grid-template-columns: minmax(260px, 1fr) 380px;
    gap: 8px;
    align-items: start;
  }
  .layout .left { grid-column: 1; }
  .layout .right { grid-column: 2; display: flex; flex-direction: column; gap: 12px; padding-bottom: 20px; }

  .table-section { border: 2px solid #000; padding: 12px; width: 100%; box-sizing: border-box; text-align: left; border-radius: 12px; background: #fff; height: auto; }
  .section-label { font-weight: 700; font-size: 18px; margin-bottom: 8px; text-align: center; }

  .skill-block { border: 1px solid #bbb; border-radius: 12px; overflow: hidden; margin-bottom: 12px; background: #fff; }
  .skill-header { display: flex; align-items: center; justify-content: center; padding: 10px 14px; font-weight: 700; font-size: 18px; cursor: pointer; user-select: none; }
  .skill-header .arrow { font-size: 22px; line-height: 1; margin: 0 10px; width: 22px; text-align: center; }
  .skill-header .title { white-space: nowrap; }
  .skills-inner { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; padding: 12px; }
  .skills-inner.collapsed { display: none; }

  .bg-cvc .skill-header { background: var(--cvc); }
  .bg-dig .skill-header { background: var(--dig); }
  .bg-glued .skill-header { background: var(--glued); }
  .bg-vce .skill-header { background: var(--vce); }
  .bg-rctrl .skill-header { background: var(--rctrl); }
  .bg-vteams .skill-header { background: var(--vteams); }
  .bg-dip .skill-header { background: var(--dip); }
  .bg-variant .skill-header { background: var(--variant); }
  .bg-soft .skill-header { background: var(--soft); }

  .skill-button {
    border: 2px solid #000; padding: 8px 14px; border-radius: 14px;
    font-weight: 700; font-size: 16px; cursor: pointer; background: #fff;
    transition: transform .08s ease, background-color .2s ease, color .2s ease;
    user-select: none; line-height: 1.2; min-height: 36px;
  }
  .skill-button:active { transform: translateY(1px); }
  .skill-button.cvc.selected { background: var(--cvc-selected); color: #fff; }
  .skill-button.dig.selected { background: var(--dig-selected); color: #fff; }
  .skill-button.glued.selected { background: var(--glued-selected); color: #fff; }
  .skill-button.vce.selected { background: var(--vce-selected); color: #fff; }
  .skill-button.rctrl.selected { background: var(--rctrl-selected); color: #fff; }
  .skill-button.vteams.selected { background: var(--vteams-selected); color: #fff; }
  .skill-button.dip.selected { background: var(--dip-selected); color: #fff; }
  .skill-button.variant.selected { background: var(--variant-selected); color: #fff; }
  .skill-button.soft.selected { background: var(--soft-selected); color: #fff; }

  .chips-title { margin-top: 12px; text-align: center; font-weight: 700; font-size: 14px; }
  .chips-wrap { margin-top: 8px; display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; }
  .chip { background: var(--chip-bg); color: var(--chip-text); border: none; border-radius: 999px; padding: 6px 10px; font-size: 14px; display: flex; align-items: center; gap: 8px; }
  .chip .x { width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; cursor: pointer; background: #e8edf2; color: #546e7a; }

  .option-grid { display: flex; flex-direction: column; align-items: center; gap: 8px; }
  .option-row { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
  .option-box { display: inline-block; padding: 8px 12px; border: 2px solid #000; border-radius: 12px; font-weight: 600; font-size: 16px; background: #fff; cursor: pointer; }
  .option-box.selected { background-color: #d0f0ff; }

  #output { display: flex; justify-content: center; padding: 16px 0; flex-direction: column; gap: 20px; }

  .page { 
    width: 8.5in; max-width: calc(100% - 32px);
    background: #fff; box-shadow: 0 6px 20px rgba(0,0,0,.12);
    padding: 0.5in; border: 2px solid #000; border-radius: 8px; 
    margin: 0 auto; page-break-inside: avoid;
    text-align: center;
    position: relative;
  }
  .worksheet-title { font-size: 28px; margin-bottom: 6px; font-weight: 700; }
  .skills-line { font-size: 14px; margin: 6px 0 10px; }
  .worksheet-directions { font-size: 16px; margin-bottom: 12px; }

  table.roll { margin: auto; border-collapse: collapse; }
  .roll td { border: 1px solid #000; width: 120px; height: 80px; text-align: center; vertical-align: middle; }
  .dice-cell { height: 100px; }
  .word-cell { font-size: 28px; }
  .sentence-cell { font-size: 18px; text-align: left; padding: 6px; }

  #copyright { font-size: 12px; text-align: right; margin-top: 8px; display: block; }

  @media print {
    @page { size: letter landscape; margin: 0.35in; }

    body { margin: 0 !important; padding: 0 !important; background: #fff !important; }

    /* Hide all non-essential elements */
    body > h1,
    .table-section,
    button,
    .chips-title,
    .chips-wrap,
    .subtitle,
    .layout,
    #floatingActions { display: none !important; }

    #output { margin: 0 !important; padding: 0 !important; }

    .page {
      width: 10.3in !important; /* Full usable width after margins */
      height: 7.8in !important; /* Full usable height after margins */
      max-width: none !important;
      padding: 0.25in !important;
      margin: 0 !important;
      border: none !important;
      box-shadow: none !important;
      page-break-inside: avoid !important;
      break-inside: avoid !important;
      position: static !important;
      display: block !important;
    }

    .worksheet-title { 
      font-size: 18pt !important; 
      margin: 0 0 0.1in !important; 
      line-height: 1.1 !important;
    }
    .skills-line { 
      font-size: 10pt !important; 
      margin: 0.05in 0 0.1in !important; 
      line-height: 1.2 !important;
    }
    .worksheet-directions { 
      font-size: 11pt !important; 
      margin: 0 0 0.15in !important; 
      line-height: 1.2 !important;
    }

    table.roll { 
      width: 100% !important; 
      table-layout: fixed !important; 
      border-collapse: collapse !important;
      margin: 0 auto !important;
    }
    .roll td { 
      width: 1.65in !important; /* 6 cols × 1.65in ≈ 9.9in fits within 10.3in */
      height: 1.1in !important; /* Adjusted for 5 rows + header to fit 7.8in height */
      padding: 4px !important;
      overflow-wrap: break-word !important;
      word-break: break-word !important;
      box-sizing: border-box !important;
    }
    .dice-cell { 
      height: 0.8in !important; 
    }
    .dice-cell img { 
      width: 0.5in !important; 
      height: 0.5in !important; 
      object-fit: contain !important;
    }
    .word-cell { 
      font-size: 18pt !important; 
      line-height: 1.1 !important; 
      vertical-align: middle !important;
    }
    .sentence-cell { 
      font-size: 11pt !important; 
      line-height: 1.15 !important; 
      text-align: left !important; 
      padding: 4px !important;
      vertical-align: top !important;
    }

    #copyright {
      font-size: 8pt !important;
      margin: 0.1in 0 0 0 !important;
      text-align: right !important;
      position: static !important;
      page-break-inside: avoid !important;
    }
  }
</style>
</head>
<body>
  <h1>Roll and Read Generator</h1>
  <div class="subtitle">Step 1: skills → Step 2: blends → Step 3: words/sentences/both → Step 4: (optional) grid size → Generate a <strong>landscape</strong> Roll & Read page.</div>

  <div class="layout">
    <div class="left">
      <div id="step1" class="table-section">
        <div class="section-label">Step 1: Select Skills</div>

        <!-- CVC Short Vowels -->
        <div class="skill-block bg-cvc">
          <div class="skill-header" data-target="cvc"><span class="arrow">▲</span><span class="title">CVC Short Vowels</span><span class="arrow">▲</span></div>
          <div class="skills-inner" id="section-cvc">
            <button class="skill-button cvc" data-skill="Short A">Short A</button>
            <button class="skill-button cvc" data-skill="Short E">Short E</button>
            <button class="skill-button cvc" data-skill="Short I">Short I</button>
            <button class="skill-button cvc" data-skill="Short O">Short O</button>
            <button class="skill-button cvc" data-skill="Short U">Short U</button>
            <button class="skill-button cvc" data-skill="Mixed CVC">Mixed CVC</button>
            <button class="skill-button cvc" data-skill="FLSZ">FLSZ</button>
          </div>
        </div>

        <!-- Digraphs -->
        <div class="skill-block bg-dig">
          <div class="skill-header" data-target="dig"><span class="arrow">▼</span><span class="title">Digraphs</span><span class="arrow">▼</span></div>
          <div class="skills-inner collapsed" id="section-dig">
            <button class="skill-button dig" data-skill="ck">ck</button>
            <button class="skill-button dig" data-skill="sh">sh</button>
            <button class="skill-button dig" data-skill="th">th</button>
            <button class="skill-button dig" data-skill="ch">ch</button>
            <button class="skill-button dig" data-skill="wh">wh</button>
            <button class="skill-button dig" data-skill="Digraphs Mixed">Digraphs Mixed</button>
          </div>
        </div>

        <!-- Glued Sounds -->
        <div class="skill-block bg-glued">
          <div class="skill-header" data-target="glued"><span class="arrow">▼</span><span class="title">Glued Sounds</span><span class="arrow">▼</span></div>
          <div class="skills-inner collapsed" id="section-glued">
            <button class="skill-button glued" data-skill="-all">-all</button>
            <button class="skill-button glued" data-skill="-ng">-ng</button>
            <button class="skill-button glued" data-skill="-nk">-nk</button>
            <button class="skill-button glued" data-skill="Glued Mixed">Glued Mixed
