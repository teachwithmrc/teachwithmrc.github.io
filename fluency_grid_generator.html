<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fluency Grid Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 40px;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 20px;
    }
    .container {
      display: flex;
      justify-content: space-between;
    }
    .left-box, .right-box {
      border: 2px solid #000;
      padding: 20px;
      width: 48%;
    }
    .right-box {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .center-buttons {
      text-align: center;
      margin-top: 20px;
    }
    #gridContainer {
      margin-top: 20px;
      text-align: center;
    }
    table {
      margin: 0 auto;
      border-collapse: collapse;
    }
    td {
      border: 1px solid #000;
      width: 120px;
      height: 80px;
      font-size: 32px;
      text-align: center;
      vertical-align: middle;
    }
    .sentence {
      font-size: 20px;
    }
    .footer {
      text-align: center;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>Fluency Grid Generator</h1>

  <div class="center-buttons">
    <p style="font-size: 18px; font-weight: bold;">Select Grid Content Type:</p>
    <label><input type="radio" name="contentType" value="words" /> Only Words</label>
    <label><input type="radio" name="contentType" value="sentences" /> Only Sentences</label>
    <label><input type="radio" name="contentType" value="both" /> Both</label>
  </div>

  <div class="container">
    <div class="left-box">
      <p><strong>Select Skill:</strong></p>
      <div id="skillCheckboxes"></div>

      <p><strong>Grid Size:</strong></p>
      <label><input type="radio" name="gridSize" value="15" /> 3 x 5 - 15 words</label><br>
      <label><input type="radio" name="gridSize" value="20" /> 4 x 5 - 20 words</label><br>
      <label><input type="radio" name="gridSize" value="25" /> 5 x 5 - 25 words</label>
    </div>
    <div class="right-box">
      <p><strong>Tricky-Sticky Words:</strong></p>
      <label><input type="checkbox" id="includeTricky" /> Yes, Include Them</label>
    </div>
  </div>

  <div class="center-buttons">
    <button onclick="generateGrid()">Generate Fluency Grid</button>
    <button onclick="window.print()">Print</button>
  </div>

  <div id="gridContainer"></div>

  <div class="footer" id="footer"></div>

  <script>
    const fluencyData = {};
    const trickyWords = {};
    const sentenceData = {};

    const allSkills = [
      'Mixed CVC', '0.1 - Short A', '0.2 - Short O', '0.3 - Short i', '0.4 - short u', '0.5 - Short E', '0.6 - FLSZ', '0.7 - FLSZ and CVC'
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function createSkillCheckboxes() {
      const container = document.getElementById("skillCheckboxes");
      allSkills.forEach(skill => {
        const label = document.createElement("label");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = skill;
        label.appendChild(checkbox);
        label.append(` ${skill}`);
        container.appendChild(label);
        container.appendChild(document.createElement("br"));
      });
    }

    function generateGrid() {
      const contentType = document.querySelector('input[name="contentType"]:checked')?.value;
      const gridSize = parseInt(document.querySelector('input[name="gridSize"]:checked')?.value);
      const includeTricky = document.getElementById("includeTricky").checked;
      const selectedSkills = [...document.querySelectorAll('#skillCheckboxes input:checked')].map(cb => cb.value);
      
      if (!contentType || !gridSize || selectedSkills.length === 0) {
        alert("Please select content type, grid size, and at least one skill.");
        return;
      }

      let pool = [];
      if (contentType === 'words' || contentType === 'both') {
        selectedSkills.forEach(skill => {
          pool.push(...(fluencyData[skill] || []));
          if (includeTricky && trickyWords[skill]) pool.push(...trickyWords[skill]);
        });
      }
      if (contentType === 'sentences' || contentType === 'both') {
        selectedSkills.forEach(skill => {
          pool.push(...(sentenceData[skill] || []));
        });
      }

      pool = shuffle([...new Set(pool)]).slice(0, gridSize);

      const cols = gridSize === 15 ? 3 : gridSize === 20 ? 4 : 5;
      const rows = 5;
      let html = "<table>";
      for (let i = 0; i < rows; i++) {
        html += "<tr>";
        for (let j = 0; j < cols; j++) {
          const word = pool[i * cols + j] || "";
          const className = word.includes(" ") ? "sentence" : "";
          html += `<td class="${className}">${word}</td>`;
        }
        html += "</tr>";
      }
      html += "</table>";

      const spacing = gridSize === 15 ? 6 : gridSize === 20 ? 4 : 2;
      const brs = "<br>".repeat(spacing);
      document.getElementById("gridContainer").innerHTML = html + brs;
      document.getElementById("footer").innerHTML = brs + "Copyright - InterventionStation.com - @TeachwithMrC";
    }

    window.onload = createSkillCheckboxes;
  </script>
</body>
</html>
