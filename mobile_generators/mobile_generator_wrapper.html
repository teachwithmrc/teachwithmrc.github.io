<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mobile Generator Preview</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&amp;display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #edf4fb;
      --panel: #ffffff;
      --line: #bed0e3;
      --ink: #103052;
      --muted: #4c6580;
      --accent: #2f79b8;
      --shadow: 0 10px 24px rgba(16, 48, 82, 0.12);
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      font-family: "Poppins", sans-serif;
      color: var(--ink);
      background: var(--bg);
      min-height: 100%;
    }

    body {
      -webkit-user-select: none;
      user-select: none;
    }

    .shell {
      width: min(1180px, calc(100% - 16px));
      margin: 8px auto;
      background: var(--panel);
      border: 2px solid var(--line);
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
      min-height: calc(100dvh - 16px);
      display: grid;
      grid-template-rows: auto auto 1fr;
    }

    .head {
      padding: 10px 10px 8px;
      background: linear-gradient(140deg, #f4f9ff, #eaf3fe);
      border-bottom: 2px solid #d3e2f1;
    }

    .title {
      margin: 0;
      font-size: clamp(1rem, 2.8vw, 1.25rem);
      line-height: 1.2;
      font-weight: 800;
      color: #153e66;
    }

    .src {
      margin: 6px 0 0;
      font-size: 0.77rem;
      color: var(--muted);
      word-break: break-word;
      line-height: 1.35;
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      padding: 8px 10px;
      border-bottom: 2px solid #d3e2f1;
      background: #fff;
    }

    .btn {
      height: 36px;
      border: 2px solid #a9c6e4;
      border-radius: 10px;
      background: #f7fbff;
      color: #134069;
      font: inherit;
      font-size: 0.8rem;
      font-weight: 700;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 8px;
      cursor: pointer;
    }

    .btn.primary {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .viewer {
      position: relative;
      background: #f3f8ff;
      min-height: calc(100dvh - 176px);
      overflow: hidden;
    }

    #previewFrame {
      width: 100%;
      height: calc(100dvh - 176px);
      border: 0;
      background: #fff;
      display: none;
      pointer-events: none;
    }

    #placeholder {
      width: 100%;
      height: calc(100dvh - 176px);
      display: none;
      object-fit: contain;
      object-position: center;
      background: #fff;
      padding: 8px;
    }

    .fomo-overlay {
      position: absolute;
      inset: 0;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0;
      backdrop-filter: blur(2.5px);
      -webkit-backdrop-filter: blur(2.5px);
      background: rgba(255, 255, 255, 0.1);
      background-image: url("data:image/svg+xml,%3Csvg width='250' height='250' viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='20' y='150' fill='%23000' opacity='0.15' transform='rotate(-45 125 125)' font-family='Poppins' font-weight='900' font-size='32'%3EPREVIEW MODE%3C/text%3E%3C/svg%3E");
      pointer-events: auto;
    }

    .lock-card {
      background: #111;
      color: #fff;
      padding: 28px;
      border-radius: 18px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
      width: min(90vw, 420px);
      border: 2px solid #fff;
    }

    .lock-icon {
      font-size: 36px;
      margin-bottom: 10px;
      display: block;
    }

    .lock-title {
      margin: 0 0 8px;
      font-size: 22px;
      font-weight: 900;
      line-height: 1.2;
    }

    .lock-desc {
      margin: 0 0 18px;
      font-size: 13px;
      opacity: 0.9;
      line-height: 1.45;
    }

    .cta-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      color: #111;
      text-decoration: none;
      padding: 10px 18px;
      border-radius: 10px;
      font-weight: 800;
      font-size: 14px;
      border: 2px solid #fff;
      min-width: 160px;
    }

    .notice {
      margin: 0;
      padding: 8px 10px;
      font-size: 0.75rem;
      color: #5a728d;
      line-height: 1.35;
      border-top: 2px solid #d3e2f1;
      background: #f7fbff;
    }

    @media (min-width: 760px) {
      .controls {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media print {
      body {
        display: none !important;
      }
    }
  </style>
</head>
<body oncontextmenu="return false;">
  <div class="shell">
    <header class="head">
      <h1 id="pageTitle" class="title">Mobile Generator Preview</h1>
      <p id="sourcePath" class="src">Loading preview...</p>
    </header>

    <div class="controls">
      <a class="btn" href="../mobile_nav_hub_v1.html">Back to Mobile Hub</a>
      <a class="btn" href="index.html">All Mobile Generators</a>
      <a class="btn primary" href="https://member.interventionstation.com/join" target="_blank" rel="noopener">Join Membership</a>
    </div>

    <main class="viewer">
      <iframe id="previewFrame" title="Preview content" loading="lazy"></iframe>
      <img id="placeholder" alt="Generator preview placeholder" />

      <div class="fomo-overlay" aria-hidden="false">
        <div class="lock-card">
          <span class="lock-icon">ðŸ”’</span>
          <h2 class="lock-title">Premium Resource</h2>
          <p class="lock-desc">You are viewing a locked preview. Join membership to access full generator functionality.</p>
          <a class="cta-btn" href="https://member.interventionstation.com/join" target="_blank" rel="noopener">Join Membership</a>
        </div>
      </div>
    </main>

    <p id="notice" class="notice">Preview-only locked page.</p>
  </div>

  <script>
    const REGISTRY = {
      // preview_frame
      "01tictactoegenerator": { mode: "preview_frame", title: "Tic Tac Toe Generator", preview: "../tictacpreview.html" },
      "tic_tac_toe_generator": { mode: "preview_frame", title: "Tic Tac Toe Generator", preview: "../tictacpreview.html" },
      "tic_tac_toe_generator1": { mode: "preview_frame", title: "Tic Tac Toe Generator", preview: "../tictacpreview.html" },
      "tic_tac_toe_generator3": { mode: "preview_frame", title: "Tic Tac Toe Generator", preview: "../tictacpreview.html" },
      "tic_tac_toe_multisyllabic": { mode: "preview_frame", title: "Tic Tac Toe Generator", preview: "../tictacpreview.html" },

      "fluency_grid_generator": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_embeddedJS": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_final": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_final_visual_fixed": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_standalone_fixed": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_visual_bordered_fixed": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_generator_visual_update_v2": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },
      "fluency_grid_multisyllabic": { mode: "preview_frame", title: "Fluency Grid Generator", preview: "../fluencygridpreview.html" },

      "roll_read_multisyllabic": { mode: "preview_frame", title: "Roll and Read Generator", preview: "../rollreadpreview.html" },
      "wordmapmaster": { mode: "preview_frame", title: "Word Mapping Generator", preview: "../wordmap2preview.html" },
      "masterwordladderfinal": { mode: "preview_frame", title: "Word Ladder Generator", preview: "../wordladderpreview.html" },
      "math_tic_tac_toe": { mode: "preview_frame", title: "Math Tic Tac Toe", preview: "../ultimate_math_game_modes_preview.html" },
      "math_roll_and_read": { mode: "preview_frame", title: "Math Roll and Read", preview: "../ultimate_math_game_modes_preview.html" },

      // locked_placeholder
      "addition_graphic_organizer_generator": {
        mode: "locked_placeholder",
        title: "Addition Graphic Organizer Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b946855d8bc344764d280.png"
      },
      "counting_coin_generator": {
        mode: "locked_placeholder",
        title: "Counting Coin Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd50551547af59.png"
      },
      "counting_generator": {
        mode: "locked_placeholder",
        title: "Counting Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468df9bdfe247263144.png"
      },
      "lock_escape_generator": {
        mode: "locked_placeholder",
        title: "Lock Escape Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd5081f047af5e.png"
      },
      "long_division_colorcoded_generator": {
        mode: "locked_placeholder",
        title: "Long Division Color-Coded Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd50e35b47af63.png"
      },
      "long_division_mainstream_generator": {
        mode: "locked_placeholder",
        title: "Long Division Mainstream Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd50e35b47af63.png"
      },
      "long_division_mainstream_generator_v2": {
        mode: "locked_placeholder",
        title: "Long Division Mainstream Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd50e35b47af63.png"
      },
      "long_division_mainstream_generator_v2_blank": {
        mode: "locked_placeholder",
        title: "Long Division Mainstream Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b94685dfd50e35b47af63.png"
      },
      "manipulatives_add_sub_generator": {
        mode: "locked_placeholder",
        title: "Add/Sub Manipulatives Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b946855d8bc344764d280.png"
      },
      "partial_products_2x1_generator": {
        mode: "locked_placeholder",
        title: "Partial Products Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468590acbb5788908fe.png"
      },
      "pyramid_spelling_generator": {
        mode: "locked_placeholder",
        title: "Pyramid Spelling Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468590acbea30890900.png"
      },
      "rounding": {
        mode: "locked_placeholder",
        title: "Rounding Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468590acbada08908ff.png"
      },
      "sentence_generator": {
        mode: "locked_placeholder",
        title: "Sentence Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/68bd9e30f2b0b9f08ce694c4.jpeg"
      },
      "sentence_generator1": {
        mode: "locked_placeholder",
        title: "Sentence Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/68bd9e30f2b0b9f08ce694c4.jpeg"
      },
      "spelling": {
        mode: "locked_placeholder",
        title: "Spelling Worksheet Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468590acbea30890900.png"
      },
      "subtraction_graphic_organizer_generator": {
        mode: "locked_placeholder",
        title: "Subtraction Graphic Organizer Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b946855d8bc344764d280.png"
      },
      "vce_word_generator": {
        mode: "locked_placeholder",
        title: "VCe Word Generator",
        image: "https://assets.cdn.filesafe.space/F9vnmU5R8sOuTGoxp5by/media/699b9468590acb848f8908fd.png"
      }
    };

    const params = new URLSearchParams(window.location.search);
    const pageTitle = document.getElementById("pageTitle");
    const sourcePath = document.getElementById("sourcePath");
    const previewFrame = document.getElementById("previewFrame");
    const placeholder = document.getElementById("placeholder");
    const notice = document.getElementById("notice");

    function blockPrintShortcuts(event) {
      if ((event.ctrlKey || event.metaKey) && (event.key === "p" || event.key === "P")) {
        event.preventDefault();
        notice.textContent = "Printing is disabled in preview mode.";
      }
    }

    document.addEventListener("keydown", blockPrintShortcuts);

    const badSrc = params.get("src");
    const generatorId = params.get("g");

    if (badSrc) {
      pageTitle.textContent = "Invalid Preview Link";
      sourcePath.textContent = "Direct src links are blocked. Use g=<generator_id>.";
      notice.textContent = "Blocked unsafe preview URL.";
      throw new Error("Blocked src query parameter");
    }

    if (!generatorId || !REGISTRY[generatorId]) {
      pageTitle.textContent = "Unknown Generator";
      sourcePath.textContent = "Missing or invalid generator id.";
      notice.textContent = "Use links from /mobile_generators/index.html";
      throw new Error("Unknown generator id");
    }

    const entry = REGISTRY[generatorId];
    pageTitle.textContent = entry.title + " (Preview Mode)";
    sourcePath.textContent = "Generator ID: " + generatorId;

    if (entry.mode === "preview_frame") {
      previewFrame.style.display = "block";
      previewFrame.src = entry.preview;
      notice.textContent = "Preview-only locked page. Live generator actions are disabled.";
    } else {
      placeholder.style.display = "block";
      placeholder.src = entry.image;
      notice.textContent = "Locked placeholder preview. Join membership for full generator access.";
    }
  </script>
</body>
</html>
