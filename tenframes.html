<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ten Frame Generator</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  *{ box-sizing:border-box; }
  html, body{
    margin:0; padding:0;
    font-family:"Poppins", Arial, sans-serif;
    background:#fff; color:#111;
    overflow-x:hidden;
  }
  .wrap{ max-width:980px; margin:0 auto; padding:12px; }

  /* ========= TOP MENU ========= */
  .menu{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:center;
    margin-bottom:12px;
  }
  .tab{
    border:2px solid #111;
    border-radius:14px;
    padding:10px 14px;
    font-weight:900;
    font-size:15px;
    cursor:pointer;
    background:#fff;
    color:#111;
    user-select:none;
  }
  .tab.active{ background:#111; color:#fff; }

  /* ========= CONTROLS (SIMPLE) ========= */
  .controls{
    border:2px solid #111;
    border-radius:12px;
    padding:12px;
    margin-bottom:12px;
  }
  .controls-top{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
    align-items:flex-end;
    justify-content:center;
  }
  .field{
    display:flex;
    flex-direction:column;
    gap:6px;
    min-width:200px;
  }
  .field label{
    font-size:12px;
    font-weight:800;
  }
  input{
    height:42px;
    min-width:200px;
    border:2px solid #111;
    border-radius:10px;
    padding:8px 12px;
    font-family:"Poppins", Arial, sans-serif;
    font-size:14px;
    background:#fff;
  }
  input:disabled{
    opacity:0.65;
    background:#f5f5f5;
    cursor:not-allowed;
  }

  .hint{
    width:100%;
    text-align:center;
    font-size:13px;
    font-weight:700;
    margin-top:6px;
  }

  .controls-actions{
    margin-top:12px;
    display:flex;
    justify-content:center;
    gap:14px;
    flex-wrap:wrap;
  }
  button{
    height:52px;
    padding:0 28px;
    border:2px solid #111;
    border-radius:14px;
    font-weight:900;
    font-size:17px;
    font-family:"Poppins", Arial, sans-serif;
    background:#111;
    color:#fff;
    cursor:pointer;
  }
  button.secondary{
    background:#fff;
    color:#111;
  }

  /* ========= SHEET ========= */
  .title{
    text-align:center;
    font-size:28px;
    font-weight:900;
    margin:6px 0 10px;
  }

  /* Black outlines */
  .table{ border:2px solid #111; }
  .row{ display:grid; grid-template-columns:1fr 1fr; }

  .cell{
    border-right:2px solid #111;
    border-bottom:2px solid #111;
    min-height:190px;
    padding:10px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
  }
  .row .cell:last-child{ border-right:none; }
  .table .row:last-child .cell{ border-bottom:none; }

  .expr{
    font-size:22px;
    font-weight:900;
    text-align:center;
    line-height:1.1;
  }
  .blank{
    display:inline-block;
    width:95px;
    border-bottom:3px solid #111;
    transform: translateY(-3px);
  }

  /* Frames */
  .frames{
    display:grid;
    gap:10px;
    width:235px;
  }
  .tenframe{ border:2px solid #111; }
  .tfgrid{
    display:grid;
    grid-template-columns:repeat(5,1fr);
  }
  .tfcell{
    border:2px solid #111;
    height:34px;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .footer{
    text-align:center;
    font-size:12px;
    font-weight:800;
    margin-top:10px;
  }

  @media print{
    .menu, .controls{ display:none; }
    .wrap{ padding:0; }
  }
</style>
</head>

<body>
<div class="wrap">

  <!-- TOP MENU (ORDER YOU REQUESTED) -->
  <div class="menu" id="menu">
    <div class="tab active" data-skill="within10_add">Add: Within 10</div>
    <div class="tab" data-skill="within10_sub">Subtract: Within 10</div>
    <div class="tab" data-skill="over10_add">Add: Over 10 (to 20)</div>
    <div class="tab" data-skill="over10_sub">Subtract: Over 10 (to 20)</div>
  </div>

  <!-- SIMPLE CONTROLS -->
  <div class="controls">
    <div class="controls-top">
      <div class="field">
        <label for="min">Lowest #</label>
        <input id="min" type="number" value="0" min="0" max="20">
      </div>
      <div class="field">
        <label for="max">Highest #</label>
        <input id="max" type="number" value="10" min="1" max="20">
      </div>
    </div>

    <div class="hint" id="hintText">Within 10 is locked to 0–10.</div>

    <div class="controls-actions">
      <button type="button" id="btnGen">Generate</button>
      <button type="button" class="secondary" id="btnPrint">Print</button>
    </div>
  </div>

  <div class="title" id="sheetTitle">Add Within 10 Using Ten Frames</div>
  <div class="table" id="table"></div>
  <div class="footer">Copyright - Generated from InterventionStation.com - @TeachWithMrC</div>

</div>

<script>
  const $ = (id) => document.getElementById(id);

  // ====== State ======
  let SKILL = "within10_add";

  function clamp(n,a,b){ return Math.max(a, Math.min(b,n)); }
  function r(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

  function normalizeBounds(){
    let lo = clamp(parseInt($("min").value || "0",10), 0, 20);
    let hi = clamp(parseInt($("max").value || "10",10), 1, 20);
    if (hi < lo) [lo,hi] = [hi,lo];
    $("min").value = lo;
    $("max").value = hi;
    return { lo, hi };
  }

  // Ten-frame fill (0..20) across two frames
  function dots20(n){
    n = clamp(n,0,20);
    const f1 = Array(10).fill(false);
    const f2 = Array(10).fill(false);
    for(let i=0;i<Math.min(10,n);i++) f1[i]=true;
    for(let i=0;i<Math.max(0,n-10);i++) f2[i]=true;
    return [f1,f2];
  }
  // One-frame fill (0..10)
  function dots10(n){
    n = clamp(n,0,10);
    const f = Array(10).fill(false);
    for(let i=0;i<n;i++) f[i]=true;
    return f;
  }

  // SVG dot (prints reliably)
  function dotSVG(){
    const ns="http://www.w3.org/2000/svg";
    const svg=document.createElementNS(ns,"svg");
    svg.setAttribute("viewBox","0 0 100 100");
    svg.style.width="84%";
    svg.style.height="84%";
    const c=document.createElementNS(ns,"circle");
    c.setAttribute("cx","50");
    c.setAttribute("cy","50");
    c.setAttribute("r","43");
    c.setAttribute("fill","#111");
    svg.appendChild(c);
    return svg;
  }

  function buildFrame(arrBool){
    const ten = document.createElement("div");
    ten.className = "tenframe";
    const g = document.createElement("div");
    g.className = "tfgrid";
    for(let i=0;i<10;i++){
      const cell = document.createElement("div");
      cell.className = "tfcell";
      if(arrBool[i]) cell.appendChild(dotSVG());
      g.appendChild(cell);
    }
    ten.appendChild(g);
    return ten;
  }

  // No duplicates (commutative for addition)
  function keyFor(mode, a, b){
    if(mode === "add"){
      const x = Math.min(a,b);
      const y = Math.max(a,b);
      return `A:${x}+${y}`;
    }
    return `S:${a}-${b}`;
  }

  // ====== Problem generators ======

  // Add within 10: sum <= 10, not all zeros
  function gen_within10_add(){
    for(let t=0;t<12000;t++){
      const a=r(0,9);
      const b=r(0,9);
      const s=a+b;
      if(s>10) continue;
      if(a===0 && b===0) continue;
      return {a,b};
    }
    return {a:5,b:3};
  }

  // Sub within 10: a<=10, b<=a, avoid too many equal pairs
  function gen_within10_sub(){
    for(let t=0;t<12000;t++){
      const a=r(1,10);
      const b=r(0,a);
      if(a===b) continue;
      return {a,b};
    }
    return {a:9,b:4};
  }

  // Add over 10 to 20: DEFAULT single-digit addends, sum > 10, sum <= 20
  // Avoids junk like 18+2 by default by keeping both addends single-digit.
  function gen_over10_add(lo, hi){
    for(let t=0;t<20000;t++){
      // Focused make-a-ten style: first addend 6..9
      let a=r(6,9);
      if(a<lo || a>hi) continue;
      let b=r(1,9);

      // keep "bigger number first" automatically
      if(b>a) [a,b]=[b,a];

      const s=a+b;
      if(s<=10) continue;
      if(s>20) continue;

      return {a,b};
    }
    return {a:9,b:4};
  }

  // Sub over 10 to 20: DEFAULT teen first number, subtract 1..9, usually crosses 10
  function gen_over10_sub(lo, hi){
    for(let t=0;t<25000;t++){
      // keep a in 11..hi (and within bounds)
      const a=r(Math.max(11,lo), Math.max(11,hi));
      if(a>hi) continue;

      // Prefer crossing 10: b > a-10 (e.g., 15-7)
      const bMin=Math.max(1,(a-10)+1);
      const bMax=Math.min(9,a-1);
      if(bMin>bMax) continue;
      const b=r(bMin,bMax);

      return {a,b};
    }
    return {a:15,b:7};
  }

  // ====== Render cell ======
  function buildCell(mode, a, b, framesCount){
    const cell=document.createElement("div");
    cell.className="cell";

    const op=(mode==="add")?"+":"−";
    cell.innerHTML=`<div class="expr">${a} ${op} ${b} = <span class="blank"></span></div>`;

    const fs=document.createElement("div");
    fs.className="frames";

    // Prefill is ALWAYS on (simpler UX)
    if(framesCount===2){
      const [f1,f2]=dots20(a);
      fs.appendChild(buildFrame(f1));
      fs.appendChild(buildFrame(f2));
    }else{
      fs.appendChild(buildFrame(dots10(a)));
    }

    cell.appendChild(fs);
    return cell;
  }

  // ====== Build worksheet ======
  function build(){
    let { lo, hi } = normalizeBounds();

    // Configure per tab: rows/frames/title + lock bounds for within 10
    let mode="add";
    let rows=5;        // within-10 pages default to 10 problems
    let frames=1;
    let title="";

    const within10 = (SKILL==="within10_add" || SKILL==="within10_sub");

    if(within10){
      // Lock bounds to 0..10 (teacher shouldn’t have to think about it)
      lo=0; hi=10;
      $("min").value=0;
      $("max").value=10;
      $("min").disabled=true;
      $("max").disabled=true;
      $("hintText").textContent="Within 10 is locked to 0–10.";
    }else{
      $("min").disabled=false;
      $("max").disabled=false;
      $("hintText").textContent="Over 10 uses your Lowest/Highest as the FIRST number range (up to 20).";
    }

    if(SKILL==="within10_add"){
      mode="add"; rows=5; frames=1;
      title="Add Within 10 Using Ten Frames";
    } else if(SKILL==="within10_sub"){
      mode="sub"; rows=5; frames=1;
      title="Subtract Within 10 Using Ten Frames";
    } else if(SKILL==="over10_add"){
      mode="add"; rows=4; frames=2;  // 8 problems fits best with 2 frames
      title="Add Over 10 (to 20) Using Ten Frames";
    } else if(SKILL==="over10_sub"){
      mode="sub"; rows=4; frames=2;  // 8 problems fits best with 2 frames
      title="Subtract Over 10 (to 20) Using Ten Frames";
    }

    $("sheetTitle").textContent=title;

    // Generate unique problems
    const total=rows*2;
    const seen=new Set();
    const qs=[];
    let guard=0;

    while(qs.length<total && guard<50000){
      guard++;

      let q;
      if(SKILL==="within10_add") q=gen_within10_add();
      if(SKILL==="within10_sub") q=gen_within10_sub();
      if(SKILL==="over10_add")   q=gen_over10_add(lo,hi);
      if(SKILL==="over10_sub")   q=gen_over10_sub(lo,hi);

      let a=q.a, b=q.b;
      const k=keyFor(mode,a,b);
      if(seen.has(k)) continue;
      seen.add(k);

      qs.push({a,b});
    }

    // Render
    const table=$("table");
    table.innerHTML="";

    for(let i=0;i<rows;i++){
      const row=document.createElement("div");
      row.className="row";

      const left=qs[i*2], right=qs[i*2+1];
      row.appendChild(buildCell(mode,left.a,left.b,frames));
      row.appendChild(buildCell(mode,right.a,right.b,frames));
      table.appendChild(row);
    }
  }

  // ====== Tabs ======
  function setSkill(skill){
    SKILL=skill;
    document.querySelectorAll(".tab").forEach(t=>{
      t.classList.toggle("active", t.dataset.skill===skill);
    });
    build();
  }

  $("menu").addEventListener("click",(e)=>{
    const tab=e.target.closest(".tab");
    if(!tab) return;
    setSkill(tab.dataset.skill);
  });

  // Buttons
  $("btnGen").addEventListener("click", build);
  $("btnPrint").addEventListener("click", ()=>window.print());

  // Only min/max changes matter (on over-10 tabs)
  $("min").addEventListener("change", build);
  $("max").addEventListener("change", build);

  // Initial
  build();
</script>
</body>
</html>
