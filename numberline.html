<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Open Number Line – Count Backwards (Printable)</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: #ffffff;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .page {
      width: 8.5in;
      max-width: 100%;
      margin: 0 auto;
      padding: 0.5in 0.5in 0.75in;
    }

    h1 {
      font-size: 1.2rem;
      margin: 0 0 4px;
      text-align: center;
    }

    .subtitle {
      font-size: 0.85rem;
      text-align: center;
      margin-bottom: 10px;
      color: #333;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      font-size: 0.85rem;
    }

    label {
      font-size: 0.85rem;
    }

    input {
      width: 70px;
      padding: 3px 5px;
      font-size: 0.85rem;
      border-radius: 4px;
      border: 1px solid #000;
    }

    button {
      padding: 5px 10px;
      font-size: 0.85rem;
      border-radius: 4px;
      border: 1px solid #000;
      cursor: pointer;
      font-weight: 600;
      background: #ffffff;
    }

    .numberline-wrapper {
      margin-top: 8px;
      border: 2px solid #000;
      padding: 8px;
    }

    svg {
      width: 100%;
      height: 320px;
      display: block;
    }

    .equation {
      text-align: center;
      font-size: 1.1rem;
      margin-top: 8px;
      font-weight: 600;
    }

    .warning {
      text-align: center;
      color: #b00020;
      font-size: 0.85rem;
      margin-top: 4px;
    }

    .footer-note {
      font-size: 0.75rem;
      color: #333;
      margin-top: 8px;
      text-align: center;
    }

    /* Print: hide controls, fill page cleanly */
    @media print {
      .controls {
        display: none;
      }

      .page {
        width: 100%;
        margin: 0;
        padding: 0.5in;
      }

      button {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>Open Number Line – Count Backwards</h1>
    <div class="subtitle">
      Start at the number on the right. Hop back by ones, then tens. Write each number on the lines under the ticks.
    </div>

    <div class="controls">
      <label>Start:</label>
      <input id="startInput" type="number" value="72" />
      <label>Subtract:</label>
      <input id="subInput" type="number" value="38" />
      <button id="drawBtn">Generate Number Line</button>
    </div>

    <div class="numberline-wrapper">
      <svg id="numberLineSvg" viewBox="0 0 800 320"></svg>
    </div>

    <div id="equation" class="equation"></div>
    <div id="warning" class="warning"></div>

    <div class="footer-note">
      Only the starting number is printed. All other ticks have individual writing lines for students to fill in as they count back.
    </div>
  </div>

  <script>
    const svg = document.getElementById("numberLineSvg");
    const eqEl = document.getElementById("equation");
    const warnEl = document.getElementById("warning");

    function clearSvg() {
      while (svg.firstChild) svg.removeChild(svg.firstChild);
    }

    function createSvgElement(name, attrs) {
      const el = document.createElementNS("http://www.w3.org/2000/svg", name);
      for (const key in attrs) {
        el.setAttribute(key, attrs[key]);
      }
      return el;
    }

    function drawNumberLine(start, sub) {
      clearSvg();
      eqEl.textContent = "";
      warnEl.textContent = "";

      if (!Number.isFinite(start) || !Number.isFinite(sub)) {
        warnEl.textContent = "Enter valid numbers.";
        return;
      }
      if (sub <= 0 || start <= sub) {
        warnEl.textContent = "Use numbers with start > subtract and subtract > 0.";
        return;
      }

      const ones = sub % 10;
      const tens = Math.floor(sub / 10);

      // ones first, then tens (e.g., 38 -> 8 ones, 3 tens)
      const steps = [];
      for (let i = 0; i < ones; i++) steps.push(1);
      for (let i = 0; i < tens; i++) steps.push(10);

      const segmentCount = steps.length;
      if (segmentCount === 0) return;

      // compute values from right (start) to left (answer)
      const points = [];
      let currentVal = start;
      points.push({ value: currentVal }); // starting number on right

      for (const step of steps) {
        currentVal -= step;
        points.push({ value: currentVal });
      }
      const answer = currentVal;

      // layout: proportional spacing, sized for print
      const svgWidth = 800;
      const marginLeft = 80;
      const marginRight = 80;
      const arrowGap = 20;
      const lineY = 160;

      const xLineStart = marginLeft;
      const xLineEnd = svgWidth - marginRight;
      const innerStart = xLineStart + arrowGap;
      const innerEnd = xLineEnd - arrowGap;
      const innerLength = innerEnd - innerStart;

      const totalDistance = steps.reduce((a, b) => a + b, 0);
      const widthPerUnit = innerLength / totalDistance;

      // place ticks: start on right, move left
      let xCurrent = innerEnd;
      points[0].x = xCurrent;

      let stepIndex = 0;
      for (let i = 1; i < points.length; i++) {
        const stepSize = steps[stepIndex++];
        xCurrent -= stepSize * widthPerUnit;
        points[i].x = xCurrent;
      }

      const xStartTick = points[0].x;
      const xEndTick = points[points.length - 1].x;

      // main line
      const mainLine = createSvgElement("line", {
        x1: xLineStart,
        y1: lineY,
        x2: xLineEnd,
        y2: lineY,
        stroke: "black",
        "stroke-width": 4,
        "stroke-linecap": "round"
      });
      svg.appendChild(mainLine);

      // arrowheads just outside first and last tick
      const leftArrow = createSvgElement("path", {
        d: `M ${xLineStart} ${lineY} L ${xLineStart + 14} ${lineY - 8} L ${xLineStart + 14} ${lineY + 8} Z`,
        fill: "black"
      });
      const rightArrow = createSvgElement("path", {
        d: `M ${xLineEnd} ${lineY} L ${xLineEnd - 14} ${lineY - 8} L ${xLineEnd - 14} ${lineY + 8} Z`,
        fill: "black"
      });
      svg.appendChild(leftArrow);
      svg.appendChild(rightArrow);

      // ticks + writing lines
      const tickTop = lineY - 12;
      const tickBottom = lineY + 12;
      const textY = lineY + 40;
      const lineYUnderline = lineY + 45; // underline position for blanks

      points.forEach((pt, i) => {
        // tick
        const tick = createSvgElement("line", {
          x1: pt.x,
          y1: tickTop,
          x2: pt.x,
          y2: tickBottom,
          stroke: "black",
          "stroke-width": 3
        });
        svg.appendChild(tick);

        if (i === 0) {
          // starting number on right
          const text = createSvgElement("text", {
            x: pt.x,
            y: textY,
            "text-anchor": "middle",
            "font-size": "18",
            "font-weight": "700"
          });
          text.textContent = pt.value;
          svg.appendChild(text);
        } else {
          // blank underline for student (individual ___ under each tick)
          const underline = createSvgElement("line", {
            x1: pt.x - 18,
            y1: lineYUnderline,
            x2: pt.x + 18,
            y2: lineYUnderline,
            stroke: "black",
            "stroke-width": 2
          });
          svg.appendChild(underline);
        }
      });

      // arcs + jump labels (−1 vs −10)
      for (let i = 0; i < steps.length; i++) {
        const stepSize = steps[i];
        const x1 = points[i].x;
        const x2 = points[i + 1].x;
        const midX = (x1 + x2) / 2;

        // arc height: bigger for tens
        const arcHeight = stepSize === 1 ? 30 : 50;

        const path = createSvgElement("path", {
          d: `M ${x1} ${lineY} Q ${midX} ${lineY - arcHeight}, ${x2} ${lineY}`,
          fill: "none",
          stroke: "black",
          "stroke-width": 3,
          "stroke-linecap": "round"
        });
        svg.appendChild(path);

        const jumpLabel = createSvgElement("text", {
          x: midX,
          y: lineY - arcHeight - 6,
          "text-anchor": "middle",
          "font-size": "16",
          "font-weight": "700"
        });
        jumpLabel.textContent = `-${stepSize}`;
        svg.appendChild(jumpLabel);
      }

      // equation with blank; answer shown in parentheses for teacher
      eqEl.textContent = `${start} − ${sub} = ______   (answer: ${answer})`;
    }

    document.getElementById("drawBtn").addEventListener("click", () => {
      const start = parseInt(document.getElementById("startInput").value, 10);
      const sub = parseInt(document.getElementById("subInput").value, 10);
      drawNumberLine(start, sub);
    });

    // First load example
    drawNumberLine(72, 38);
  </script>
</body>
</html>
