<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Open Number Line Subtraction</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 20px;
      display: flex;
      justify-content: center;
      background: #f5f5f5;
    }

    .container {
      background: #ffffff;
      padding: 20px 24px 28px;
      border-radius: 12px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    h1 {
      font-size: 1.4rem;
      margin: 0 0 8px;
      text-align: center;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
    }

    label {
      font-size: 0.9rem;
    }

    input {
      width: 70px;
      padding: 4px 6px;
      font-size: 0.9rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    button {
      padding: 6px 12px;
      font-size: 0.9rem;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      background: #ffffff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    button:hover {
      transform: translateY(-1px);
    }

    .equation {
      text-align: center;
      font-size: 1.4rem;
      margin-top: 8px;
      font-weight: 600;
    }

    svg {
      border: 2px solid #000;
      border-radius: 8px;
      background: #fff;
      width: 100%;
      height: 220px;
      margin-top: 10px;
    }

    .footer-note {
      font-size: 0.8rem;
      color: #555;
      margin-top: 8px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Open Number Line – Subtracting by Ones and Tens</h1>

    <div class="controls">
      <label>Start:</label>
      <input id="startInput" type="number" value="72" />
      <label>Subtract:</label>
      <input id="subInput" type="number" value="23" />
      <button id="drawBtn">Draw Number Line</button>
    </div>

    <svg id="numberLineSvg" viewBox="0 0 800 220"></svg>

    <div id="equation" class="equation"></div>

    <div class="footer-note">
      The subtrahend is broken into ones then tens (e.g., 23 → −1, −1, −1, −10, −10), like your whiteboard example.
    </div>
  </div>

  <script>
    const svg = document.getElementById("numberLineSvg");
    const eqEl = document.getElementById("equation");

    function clearSvg() {
      while (svg.firstChild) svg.removeChild(svg.firstChild);
    }

    function createSvgElement(name, attrs) {
      const el = document.createElementNS("http://www.w3.org/2000/svg", name);
      for (const key in attrs) {
        el.setAttribute(key, attrs[key]);
      }
      return el;
    }

    function drawNumberLine(start, sub) {
      clearSvg();

      if (sub <= 0 || start <= sub) {
        eqEl.textContent = "Pick numbers with start > subtract and subtract > 0.";
        return;
      }

      const ones = sub % 10;
      const tens = Math.floor(sub / 10);

      // Steps array: ones first, then tens (e.g., 23 -> [1,1,1,10,10])
      const steps = [];
      for (let i = 0; i < ones; i++) steps.push(1);
      for (let i = 0; i < tens; i++) steps.push(10);

      const segmentCount = steps.length;
      if (segmentCount === 0) return;

      // Compute number labels from right (start) to left (answer)
      const values = [start];
      let current = start;
      for (const step of steps) {
        current -= step;
        values.push(current);
      }
      const answer = current;

      // Layout
      const marginLeft = 80;
      const marginRight = 80;
      const lineY = 130;
      const lineLength = 800 - marginLeft - marginRight;
      const dx = lineLength / segmentCount;
      const xStart = 800 - marginRight; // right end
      const xEnd = marginLeft;          // left end

      // Draw main line
      const mainLine = createSvgElement("line", {
        x1: xEnd,
        y1: lineY,
        x2: xStart,
        y2: lineY,
        stroke: "black",
        "stroke-width": 4
      });
      svg.appendChild(mainLine);

      // Arrows at both ends
      const leftArrow = createSvgElement("path", {
        d: `M ${xEnd} ${lineY} L ${xEnd+10} ${lineY-8} L ${xEnd+10} ${lineY+8} Z`,
        fill: "black"
      });
      const rightArrow = createSvgElement("path", {
        d: `M ${xStart} ${lineY} L ${xStart-10} ${lineY-8} L ${xStart-10} ${lineY+8} Z`,
        fill: "black"
      });
      svg.appendChild(leftArrow);
      svg.appendChild(rightArrow);

      // Draw ticks, labels, arcs and jump labels
      for (let i = 0; i <= segmentCount; i++) {
        const x = xStart - i * dx;

        // Tick
        const tick = createSvgElement("line", {
          x1: x,
          y1: lineY - 10,
          x2: x,
          y2: lineY + 10,
          stroke: "black",
          "stroke-width": 3
        });
        svg.appendChild(tick);

        // Number label under tick
        const text = createSvgElement("text", {
          x: x,
          y: lineY + 30,
          "text-anchor": "middle",
          "font-size": "18",
          "font-weight": i === 0 || i === segmentCount ? "700" : "400"
        });
        text.textContent = values[i];
        svg.appendChild(text);

        // Arc for jump i (between tick i and i+1)
        if (i < segmentCount) {
          const x1 = x;
          const x2 = xStart - (i + 1) * dx;
          const midX = (x1 + x2) / 2;
          const arcHeight = 40;
          const stepSize = steps[i];

          const path = createSvgElement("path", {
            d: `M ${x1} ${lineY} Q ${midX} ${lineY - arcHeight}, ${x2} ${lineY}`,
            fill: "none",
            stroke: "black",
            "stroke-width": 3
          });
          svg.appendChild(path);

          const jumpLabel = createSvgElement("text", {
            x: midX,
            y: lineY - arcHeight - 5,
            "text-anchor": "middle",
            "font-size": "16",
            "font-weight": "700"
          });
          jumpLabel.textContent = `-${stepSize}`;
          svg.appendChild(jumpLabel);
        }
      }

      // Equation text
      eqEl.textContent = `${start} − ${sub} = ${answer}`;
    }

    document.getElementById("drawBtn").addEventListener("click", () => {
      const start = parseInt(document.getElementById("startInput").value, 10);
      const sub = parseInt(document.getElementById("subInput").value, 10);
      drawNumberLine(start, sub);
    });

    // initial example
    drawNumberLine(72, 23);
  </script>
</body>
</html>
